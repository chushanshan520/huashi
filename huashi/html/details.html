<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>details</title>
<link href="../css/public.css" rel="stylesheet" type="text/css">
<link href="../css/details.css" rel="stylesheet" type="text/css">
<link href="../css/pagination.css" rel="stylesheet" type="text/css">
</head>

<body>
<div id="top">
	<a href="#"></a>
</div>

<nav>
	<div class="margin">
		<p class="p1">花市网-中国鲜花领先品牌<a href="#">{切换城市}</a></p>
		<ul>
			<li class="first"><a href="#">订单查询</a></li>
			<li class="list1"><a href="#">我的订单</a><i></i>
				<p>
					<a href="#">待付款订单</a>
					<a href="#">待确认收货</a>
					<a href="#">待评价交易</a>
				</p>
			</li>
			<li><a href="#">商品收藏</a></li>
			<li  class="list2"><a href="#">客户服务</a><i></i>
				<p>
					<a href="#">帮助中心</a>
					<a href="#">售后服务</a>
					<a href="#">服务中心</a>
				</p>
			</li>
			<li class="last"><a href="#">合作或加盟</a></li>
		</ul>
	</div>
</nav>

<header class="margin">
	<a href="#" class="logo"><img src="../images/index/05166631110429063.jpg"/></a>
	<div class="mid">
		<p>商品</p>
		<input type="text" id="txt" placeholder="请输入您想要搜索的商品关键字"/><input type="button" id="btn" value="搜索" />
		<ul>
			<li><a href="#">热门搜索:</a></li>
		    <li><a href="#">玫瑰</a></li>
		    <li><a href="#">百合</a></li>
		    <li><a href="#">蓝色妖姬</a></li>
		    <li><a href="#">爱情</a></li>
		    <li><a href="#">花篮</a></li>
		    <li><a href="#">教师</a></li>
		    <li><a href="#">七夕</a></li>
		    <li><a href="#">情人</a></li>
		</ul>
	</div>
	<div class="right">
		<ul>
			<li>
				<a href="#"><img src="../images/index/tel.png" />4006-897-397</a>
			</li>
			<li>
				<a href="#"><img src="../images/index/kf.gif" />在线客服</a>
			</li>
			<li>
				<a href="shopcar.html">去购物车结算</a>
			</li>
		</ul>
	</div>
</header>

<div id="list" class="margin">
	<div class="left">
		<p>所有商品分类</p>
		<ul class="ul1">
			<li>
					<a href="#" class="te">按鲜花的用途</a>
					<a href="#">爱情鲜花</a><a href="#">商务用花</a>
			</li>
			<li>
				 <a href="#" class="te">按鲜花的花材</a> 
				 <a href="#">玫瑰</a><a href="#">百合</a><a href="#">向日葵</a><a href="#">康乃馨</a> 
			</li>
			<li>
				 <a href="#" class="te">按鲜花的价格</a> 
				 <a href="#">100-200元</a><a href="#">200-300元</a> 
			</li>
			<li>
				 <a href="#" class="te">按对象订花</a> 
				 <a href="#">恋人</a><a href="#">朋友</a><a href="#">父母</a><a href="#">领导</a><a href="#">老师</a> 
			</li>
			<li>
				 <a href="#" class="te">按节日选花</a> 
				 <a href="#">七夕节</a><a href="#">情人节</a><a href="#">妇女节</a> 
			</li>
			<li>
				 <a href="#" class="te">按枝数订花</a> 
				 <a href="#">9枝</a><a href="#">10枝</a><a href="#">11枝</a> 
			</li>
			<li>
				 <a href="#" class="te">按类型订花</a> 
				 <a href="#">手捧鲜花</a><a href="#">礼盒鲜花</a> 
			</li>
			<li>
				 <a href="#" class="te">按颜色订花</a> 
				 <a href="#">红色</a><a href="#">黄色</a><a href="#">粉色</a><a href="#">紫色</a> 
			</li>
		</ul>
		<ul class="ul2">
			<li>
				<span>
						<a href="#">爱情用花</a>
						<a href="#">生日用花</a>
						<a href="#">商务用花</a>
						<a href="#">老师长辈</a>
						<a href="#">求婚婚庆</a>
						<a href="#">道歉鲜花</a>
						<a href="#">探病慰问</a>
						<a href="#">祝福庆贺</a>
						<a href="#">友情鲜花</a>
						
				</span>
			</li>
			<li>
				<span>
						<a href="#">玫瑰</a>
						<a href="#">百合</a>
						<a href="#">向日葵</a>
						<a href="#">康乃馨</a>
						<a href="#">郁金香</a>
						<a href="#">弗朗</a>
						<a href="#">满天星</a>
						<a href="#">马蹄莲</a>
						<a href="#">向日葵+百合</a>
						
				</span>
			</li>
			<li>
				<span>
						<a href="#">100-200元</a>
						<a href="#">200-300元</a>
						<a href="#">300-500元</a>
						<a href="#">500-1000元</a>
						<a href="#">1000-1200元</a>
						<a href="#">1200-1500元</a>
						
				</span>
			</li>
			<li>
				<span>
						<a href="#">恋人</a>
						<a href="#">朋友</a>
						<a href="#">父母</a>
						<a href="#">领导</a>
						<a href="#">老师</a>
						<a href="#">客户</a>
						<a href="#">长辈</a>
						<a href="#">病人</a>
						<a href="#">妻子</a>
						
				</span>
			</li>
			<li>
				<span>
						<a href="#">七夕节</a>
						<a href="#">情人节</a>
						<a href="#">妇女节</a>
						<a href="#">母亲节</a>
						<a href="#">光棍节</a>
						<a href="#">中秋节</a>
						<a href="#">圣诞节</a>
						<a href="#">父亲节</a>
						<a href="#">感恩节</a>
						
				</span>
			</li>
			<li>
				<span>
						<a href="#">9枝</a>
						<a href="#">11枝</a>
						<a href="#">13枝</a>
						<a href="#">19枝</a>
						<a href="#">21枝</a>
						<a href="#">29枝</a>
						<a href="#">33枝</a>
						<a href="#">66枝</a>
						<a href="#">999枝</a>
						
				</span>
			</li>
			<li>
				<span>
						<a href="#">手捧花束</a>
						<a href="#">礼盒鲜花</a>
						<a href="#">精美桌花</a>
						<a href="#">发财树</a>
						<a href="#">开业花篮</a>
						<a href="#">巧克力花束</a>
						<a href="#">巧克力</a>
						<a href="#">卡通花束</a>
						<a href="#">祭奠花篮</a>
						
				</span>
			</li>
			<li>
				<span>
						<a href="#">白色</a>
						<a href="#">紫色</a>
						<a href="#">粉色</a>
						<a href="#">红色</a>
						<a href="#">蓝色</a>
						<a href="#">香槟色</a>
						<a href="#">金色</a>
						<a href="#">黑色</a>
						<a href="#">粉色</a>
						
				</span>
			</li>
			
		</ul>
	</div>
	
	<ul  class="ul3">
		<li><a href="#" class="te">首页</a></li>
		<li><a href="list.html">全部鲜花</a></li>
		<li><a href="#">爱情鲜花</a></li>
		<li><a href="#">生日鲜花</a></li>
		<li><a href="#">开业鲜花</a></li>
		<li><a href="#">高端鲜花</a></li>
		<li><a href="#">特价鲜花</a><i><img src="../images/index/discount.gif"/></i></li>
		<li><a href="#">礼品专区</a><i><img src="../images/index/discount.gif"/></i></li>
	</ul>
</div>


<div id="deta" class="margin">
	<p class="p1"><a href="index.html">首页 ></a></p>
	<div class="spe">
		
	
		
	</div>
</div>


<div id="banner" class="margin">
	<img src="../images/details/vcz.jpg" />
</div>

<div id="flower" class="margin">
	<div class="left">
		<dl>
			<dt>猜您喜欢</dt>
			<dd>
				<img data-src="../images/details/1.jpg" />
				<p>爱你一万年</p>
				<p>￥345</p>
			</dd>
			<dd>
				<img data-src="../images/details/2.jpg" />
				<p>美好的恋情</p>
				<p>￥235</p>
			</dd>
			<dd>
				<img data-src="../images/details/3.jpg" />
				<p>为你而梦</p>
				<p>￥168</p>
			</dd>
			<dd>
				<img data-src="../images/details/4.jpg" />
				<p>今天你最美</p>
				<p>￥243</p>
			</dd>
			<dd>
				<img data-src="../images/details/5.jpg" />
				<p>天使的心跳</p>
				<p>￥352</p>
			</dd>
			<dd>
				<img data-src="../images/details/6.jpg" />
				<p>美丽遇见</p>
				<p>￥675</p>
			</dd>
			<dd>
				<img data-src="../images/details/7.jpg" />
				<p>甜蜜时光</p>
				<p>￥234</p>
			</dd>
			<dd>
				<img data-src="../images/details/8.jpg" />
				<p>心若有灵</p>
				<p>￥345</p>
			</dd>
			<dd>
				<img data-src="../images/details/9.jpg" />
				<p>巴黎夜话</p>
				<p>￥456</p>
			</dd>
			<dd>
				<img data-src="../images/details/10.jpg" />
				<p>吻下去爱上你</p>
				<p>￥666</p>
			</dd>
			<dd>
				<img data-src="../images/details/11.jpg" />
				<p>那一夜</p>
				<p>￥999</p>
			</dd>
			<dd>
				<img data-src="../images/details/12.jpg" />
				<p>知心人</p>
				<p>￥345</p>
			</dd>
			<dd>
				<img data-src="../images/details/13.jpg" />
				<p>只愿</p>
				<p>￥239</p>
			</dd>
			<dd>
				<img data-src="../images/details/14.jpg" />
				<p>宇宙之花</p>
				<p>￥967</p>
			</dd>
			<dd>
				<img data-src="../images/details/15.jpg" />
				<p>他们的爱情</p>
				<p>￥9999</p>
			</dd>
			<dd>
				<img data-src="../images/details/16.jpg" />
				<p>62的含义</p>
				<p>￥435</p>
			</dd>
			<dd>
				<img data-src="../images/details/17.jpg" />
				<p>美好的那一年</p>
				<p>￥235</p>
			</dd>
			<dd>
				<img data-src="../images/details/18.jpg" />
				<p>相知到相识</p>
				<p>￥673</p>
			</dd>
			<dd>
				<img data-src="../images/details/19.jpg" />
				<p>2022的等待</p>
				<p>￥239</p>
			</dd>
			
			
		</dl>
	</div>
	<div class="right">
		<p>商品详情</p>
		<img src="../images/details/1_05617520688154572_1280%5B1%5D.jpg" />
		<img src="../images/details/1_05617520685866417_1280%5B1%5D.jpg" />
		<img src="../images/details/1_05617520683392575_1280%5B1%5D.jpg" />
		
	</div>
	
	<div class="pagination">
		
	</div>
</div>

<div id="real">
	<div class="bto">
		<ul class="ul2 margin"> 
			<li>
				<h3>购物指南</h3>
				<a href="#">VIP会员</a>
				<a href="#">品牌服务</a>
				<a href="#">订购必读</a>
				<a href="#">购物流程</a>
			</li>
			<li>
				<h3>支付方式</h3>
				<a href="#">在线支付</a>
				<a href="#">发票说明</a>
				<a href="#">银行转账说明</a>
				<a href="#">货到付款及要求</a>
			</li>
			<li>
				<h3>配送方式</h3>
				<a href="#">配送说明</a>
				<a href="#">配送范围</a>
				<a href="#">鲜花定时配送</a>
				<a href="#">配送费用收取标准</a>
			</li>
			<li>
				<h3>售后服务</h3>
				<a href="#">订单处理</a>
				<a href="#">在线支付</a>
				<a href="#">投诉处理规范</a>
				<a href="#">订单查询及撤销</a>
				<a href="#">修改订单信息说明</a>
			</li>
			<li>
				<h3>相关知识</h3>
				<a href="#">花语大全</a>
				<a href="#">送花攻略</a>
				<a href="#">养花知识</a>
			</li>
			<li>
				<h3>帮助中心</h3>
				<a href="#">关于我们</a>
				<a href="#">联系我们</a>
				<a href="#">安全条款</a>
				<a href="#">隐私保护</a>
				<a href="#">常见问题</a>
			</li>
			<li>
				<b>花店经营</b>
				<b>9:00-20:00</b>
				<b>花店留言回复时间</b>
				<b>9:00-22:00</b>
			</li>
			<li>
				<b>花店服务热线(24小时免费)</b>
				<h2><i><img src="../images/index/dian.png"/></i>4006-2399-323</h2>
			</li>
		</ul>
	</div>
</div>

<div id="footer">
	<div class="margin">
		<div class="top">
			<p>
				<b>热门城市:</b>
				<a href="#">北京石景山区金顶街附近鲜花店</a>
				<a href="#">重庆市巴南区李家沱附近鲜花店</a>
				<a href="#">深圳市龙华区观澜街道附近鲜花店</a>
				<a href="#">忻州河曲移民村附近鲜花店</a>
				<a href="#">上海交通大学附近鲜花店</a>
				<a href="#">重庆市巴南区李家沱附近鲜花店</a>
				<a href="#">更多</a>
			</p>
			<p>
				<b>友情链接:</b>
				<a href="#">鲜花速递</a>
				<a href="#">网上花店</a>
				<a href="#">鲜花速递</a>
				<a href="#">农业之友</a>
				<a href="#">网上鲜花店</a>
				<a href="#">男士网</a>
				<a href="#">花卉价格</a>
				<a href="#">花仙居</a>
				<a href="#">车图片</a>
				<a href="#">温州装修</a>
				<a href="#">中国农产品网</a>
				<a href="#">农村致富项目</a>
				<a href="#">购物网站</a>
				<a href="#">公司法律师</a>
				<a href="#">珠宝首饰</a>
				<a href="#">包装印刷厂</a>
				<a href="#">更多</a>
			</p>
		</div>
		<div class="bto">
		<h3>
			<a href="#">送花攻略</a>
			<span>|</span>
			<a href="#">花语大全</a>
			<span>|</span>
			<a href="#">爱情鲜花</a>
			<span>|</span>
			<a href="#">生日鲜花</a>
			<span>|</span>
			<a href="#">开业花篮</a>
			<span>|</span>
			<a href="#">给老师送花</a>
			<span>|</span>
			<a href="#">客服中心</a>
			<span>|</span>
			<a href="#">网站地图</a>
			<span>|</span>
			<a href="#">友情链接</a>
			
		</h3>
		<h3>花市网 版权所有，并保留所有权利。</h3>
		<h3>ICP备案证书号：蜀ICP备1611133号</h3>
		</div>
		<ul>
			<li><i><img src="../images/index/xin.png"/></i><b>诚信网站示范企业</b></li>
			<li><i><img src="../images/index/yuan.png"/></i><b>可信网站信用评价</b></li>
			<li><i><img src="../images/index/h.png"/></i><b>诚信网站示范企业</b></li>
		</ul>
	</div>
</div>
</body>
<script src="../js/jquery.js"></script>
<script src="../js/ajax.js"></script>
<script src="../js/cookie.js"></script>
<script src="../js/jquery.pagination.js"></script>
<script>
	$("#list .left p").hover(function(){
		$("#list .ul1").css("display","block");
		$("#list .left .ul1 li").hover(function(){
			$("#list .left .ul2").children("li").css("display","none").eq($(this).index()).css("display","inline-block");
		},function(){
			$("#list .left .ul2").hover(function(){
			},function(){
			$("#list .left .ul2").children("li").css("display","none");
			$("#list .ul1").css("display","none");
			})
		})

	},function(){
	})
	
	 $(".pagination").pagination(100,{
	        items_per_page:2,
	        num_display_entries:3,
	        num_edge_entries:2,
	        current_page:10,
	        prev_text:"上一页",
	        ellipse_text:"---",
	        prev_show_always:false,
	        
	    })
		
	
	
</script>
<script>
		class List{
				constructor(options) {
					    this.url=options.url;
						this.spe=options.spe;
						this.id=JSON.parse(getCookie("goods"));
						this.goods=getCookie("goods") ? JSON.parse(getCookie("goods")) : [];
						this.shop=getCookie("shop") ? JSON.parse(getCookie("shop")) : [];
						this.load();
					}
					load(){
						var that=this;
						ajaxGet(this.url,function(res){
							that.res=JSON.parse(res);
							that.display();
							that.addEvent();
							that.left1 = document.getElementsByClassName("left1")[0];
							that.box = document.querySelector(".box");
							that.left2 = document.getElementsByClassName("left2")[0];
							that.more=document.querySelectorAll(".more img")[0];
							that.imgs=document.querySelectorAll(".more img");
							that.big = document.getElementsByClassName("big")[0];
							that.bigArea();
							that.change();
						})
					}
					
					display(){
						var str="";
						for(var i=0;i<this.res.length;i++){
							
							if(this.res[i].id==this.id){
	
								str+=`
									<div class="left1">
										<img src="${this.res[i].img.img1}" class="big"/>
										<div class="more">
											<img src="${this.res[i].img.img1}" />
											<img src="${this.res[i].img.img2}" />
											<img src="${this.res[i].img.img3}" />
										</div>
										<div class="box"></div>
									</div>
									<div class="left2" style="background: url(${this.res[i].img.img1}) no-repeat;background-size: cover ;">
										
									</div>
									<div class="right">
										<h2>${this.res[i].name}</h2>
										<p class="p2">
											${this.res[i].introduce}
										</p>
										<div class="price">
											<b>市场价：<i>${this.res[i].price.price1}</i></b>
											<b>优惠价：<s>${this.res[i].price.price2}</s></b>
										</div>
										<div class="shop">
											<input type="number" min="1" class="num" value="0"/>
											<input type="submit" value="立即购买" class="sub1"/>
											<input type="submit" value="加入购物车" class="sub2"/>
										</div>
									</div>
									<div class="deta-right">
										<dl>
											<dt>热卖推荐</dt>
											<dd>
												<img src="../images/details/2.jpg" />
												<p>￥123</p>
											</dd>
											<dd>
												<img src="../images/details/1.jpg" />
												<p>￥345</p>
											</dd>
											<dd>
												<img src="../images/details/3.jpg" />
												<p>￥456</p>
											</dd>
											<dd>
												<img src="../images/details/4.jpg" />
												<p>￥234</p>
											</dd>
											<dd>
												<img src="../images/details/5.jpg" />
												<p>￥987</p>
											</dd>
											<dd>
												<img src="../images/details/6.jpg" />
												<p>￥666</p>
											</dd>

										</dl>
									</div>
								`;
							}
						}
						this.spe.innerHTML=str;
						// this.change();
					}
				
				addEvent(){
					var that=this;
					this.spe.addEventListener("click",function(eve){
						if(eve.target.className=="sub2"){
							that.setCoo();
						}
					})
						
				}
				
				setCoo(){
						var that=this;
						if(this.shop.length==0){
							this.shop.push({
								id:this.id,
								num:1
							})
						}else{
							var onoff=true;
							for(var i=0;i<this.shop.length;i++){
								if(this.shop[i].id==this.id){
									this.shop[i].num++;
									onoff=false;
								}
							}
						}
						if(onoff){
							this.shop.push({
								id:this.id,
								num:1
							})
						}
						setCookie("shop",JSON.stringify(this.shop));
				}
				
				bigArea(){
					var that=this;
					 this.big.onmouseenter = function() {
					            that.box.style.display = "block";
					            that.left2.style.display = "block";
					            var r = (that.left1.clientWidth-that.box.clientWidth-that.more.clientWidth)/(800-that.left2.clientWidth);
					            document.onmousemove = function(e) {
					                var mouseX =  e.pageX;
					                var mouseY = e.pageY;
					                var elementX = offset(that.left1).left;
					                var elementY = offset(that.left1).top;
					                var resultX = mouseX - elementX - that.left1.clientLeft - that.box.clientWidth / 2;
					                var resultY = mouseY - elementY - that.left1.clientTop - that.box.clientHeight / 2;
					                if (resultX < 0) {
					                    resultX = 0;
					                } else if (resultX > that.left1.clientWidth - that.box.clientWidth) {
					                    resultX = that.left1.clientWidth - that.box.clientWidth;
					                }
					
					                if (resultY < 0) {
					                    resultY = 0;
					                } else if (resultY >that.left1.clientHeight - that.box.clientHeight-that.more.clientHeight) {
					                    resultY = that.left1.clientHeight - that.box.clientHeight-that.more.clientHeight;
					                }
					                that.box.style.left = resultX + "px";
					                that.box.style.top = resultY + "px";
					                that.left2.style.backgroundPositionX = -resultX / r + "px";
					                that.left2.style.backgroundPositionY = -resultY / r + "px";
					                
					            }
					        }
					        that.left1.onmouseleave = function() {
					            that.box.style.display = "none";
					            that.left2.style.display = "none";
					        }
					
					
					        function offset(dom) {
					            var obj = {
					                left: 0,
					                top: 0
					            }
					            obj.left = dom.offsetLeft;
					            obj.top = dom.offsetTop;
					            var isIE8 = window.navigator.userAgent.indexOf("MSIE 8") != -1;
					
					            var offsetParent = dom.offsetParent;
					            while (offsetParent != document.body) {
					                if (isIE8) {
					                    obj.left += offsetParent.offsetLeft;
					                    obj.top += offsetParent.offsetTop;
					                } else {
					                    obj.left += offsetParent.offsetLeft + offsetParent.clientLeft;
					                    obj.top += offsetParent.offsetTop + offsetParent.clientTop;
					                }
					                offsetParent = offsetParent.offsetParent;
					            }
					            return obj;
					        }
				}
				
				change(){
					var that=this;
					// console.log(this.res[1].img.img1);
					// console.log(this.imgs);
					// console.log(this.left2);
					// console.log(this.id);
					for(let i=0;i<this.imgs.length;i++){
						this.imgs[i].onclick=function(){
							that.big.src=that.imgs[i].src;
							var t=that.res[that.id-1].img.img1;
							console.log(that.id);
							console.log(that.res[that.id].img.img2);
								if(i==0){
									that.left2.style.background="url("+that.res[that.id-1].img.img1+") no-repeat";
								}else if(i==1){
									that.left2.style.background="url("+that.res[that.id-1].img.img2+") no-repeat";
								}else if(i==2){
									that.left2.style.background="url("+that.res[that.id-1].img.img3+") no-repeat";
								}
								
							
						}
						
					}
				}

					
	}	
				new List({
					url:"http://localhost/test1910/花市网/json/goods.json",
					spe:document.querySelector("#deta .spe")
				})
				
</script>
<script>
	var loadimgs=document.querySelectorAll("#flower .left img");
	var clientH=document.documentElement.clientHeight;
	var scrollT=document.documentElement.scrollTop;
	
	var arr=[];
	for(var i=0;i<loadimgs.length;i++){
		arr.push(loadimgs[i]);
	}
	function lazyLoad(elements,cH,sT){
		for(var i=0;i<arr.length;i++){
			if(arr[i].offsetTop<cH+sT){
				arr[i].src=arr[i].getAttribute("data-src");
				arr.splice(i,1);
				i--;
			}
		}
	}
	lazyLoad(loadimgs,clientH,scrollT);
	onscroll=function(){
		var scrollT=document.documentElement.scrollTop;
		lazyLoad(loadimgs,clientH,scrollT);
	}
</script>
</html>
